<!DOCTYPE html> 
 
<!--
  Google HTML5 slide template
 
  Authors: Luke Mahé (code)
           Marcin Wichary (code and design)
           
           Dominic Mazzoni (browser compatibility)
           Charles Chen (ChromeVox support)
 
  URL: http://code.google.com/p/html5slides/
-->
 
<html> 
  <head> 
    <title>Scalaz</title> 
 
    <meta charset='utf-8'>
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="CACHE-CONTROL" content="NO-CACHE" />
    <meta http-equiv="EXPIRES" content="Mon, 01 Jan 2000 00:00:01 GMT" />
    <script
      src='http://html5slides.googlecode.com/svn/trunk/slides.js'></script>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-2769351-2']);
      _gaq.push(['_trackPageview']);
      (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
   </script>
  </head> 

  </style> 
 
  <body style='display: none'> 
 
    <section class='slides layout-faux-widescreen'> 
      <article> 
        <h1>
          <span class='red'>Scalaz</span>
          <br>
          <div class="build"><p>с котиками</p></div>
        </h1>
        <p> 
          Леонтьев Георгий (<a href="http://juick.com/folone">@folone</a>)
          <br> 
          24.03.2012
        </p>
        <div class="build"><img src="http://spl.smugmug.com/Humor/Lambdacats/polymorphic-cat-haz-class/960526371_LLEFX-O-1.jpg" height="200"/></div>
      </article>

      <!--<article>
        <ul>
          <li>Scalaz utilities</li>
          <li>Kinds</li>
          <li>Typeclasses</li>
          <li>Datastructures (purely functional)</li>
          <li>Monoids</li>
          <li>Functors</li>
          <li>Monads</li>
          <li>Validation (demo)</li>
          <li>How to find stuff</li>
          <li>How to introduce</li>
        </ul>
      </article>-->

      <article>
        <pre>import scalaz._, Scalaz._</pre>
      </article>

      <article class="smaller">
        <h5>Типобезопасное сравнение</h5>
        <p>&lt;spoiler>∀ stuff ∈ Scalaz| stuff is typesafe OR stuff is strict&lt;/spoiler></p>
        <img src="http://spl.smugmug.com/Humor/Lambdacats/static-cat-is-checked-at/960526380_aoVQM-O-1.jpg" align="left" height="300"/>
        <pre>scala> "" == "ok"
res69: Boolean = false</pre>

          <pre>scala> "" === "ok"
res70: Boolean = false</pre>

          <pre>scala> "" == 5
res71: Boolean = false</pre>

<pre>scala> "" === 5
&lt;console&gt;:14: error: type mismatch;
 found   : Int(5)
 required: java.lang.String
              "" === 5
                     ^</pre>
      </article>

      <article class="smaller">
        <h5>Options</h5>
        <div class="build">
          <pre>scala> some(5) getOrElse 0
res77: Int = 5

scala> some(5) | 0
res78: Int = 5 // <a href="https://gist.github.com/1167211">BoxW</a> (то же для Lift'овского Box'а)</pre>

        <pre>scala> some(1) getOrElse "ok"
res1: Any = 1

scala> some(1) | "ok"
&lt;console>:14: error: type mismatch;
 found   : java.lang.String("ok")
 required: Int
              some(1) | "ok"
                        ^</pre>

          <pre>scala> ~some(5) // Zeros
res74: Int = 5
scala> ~none[Int]
res76: Int = 0

</pre>
        </div>
      </article>

      <article class="smaller">
        <h5>Условные конструкции</h5>
        <pre>scala> true ? println("true") | println("false")
true</pre>

<pre>scala> :t true ? 5 | "ok"
&lt;console>:14: error: type mismatch;
 found   : java.lang.String("ok")
 required: Int
       true ? 5 | "ok"
                  ^</pre>

        <pre>scala> true ?? 5
res83: Int = 5
scala> false ?? 5
res84: Int = 0

scala> true !? 5
res85: Int = 0
scala> false !? 5
res86: Int = 5</pre>
      </article>

      <article>
        <h5>Операции на булеанах</h5>
        <pre>
val a: Boolean = ...
val b: Boolean = ...
a ∧ b // логическое "и"
a ∨ b // логическое "или"
a ⊽ b // nor
a ⊼ b // nand
a → b // импликация (⇒ занято)
a ⇐ b // обратная импликация
a ⇏ b // отрицание импликации
a ⇍ b // обратное отрицание импликации</pre>
      </article>

      <article>
        <h5>Чейнинг</h5>
        <pre>scala> val a = (_:Int) + 6
a: Int ⇒ Int = &lt;function1&gt;

scala> val b = (_:Int).toString
b: Int ⇒ java.lang.String = &lt;function1&gt;

scala> val c = (_:String).length
c: String ⇒ Int = &lt;function1&gt;

scala> 5 |> a |> b |> c
res6: Int = 2

scala> 5 |> (c ∙ b ∙ a) // contramap
res42: Int = 2

scala> 5 |> (a ∘ b ∘ c) // map
res47: Int = 2</pre>
      </article>

      <article>
        <h5>Shows</h5>
        <pre>scala> List(1,2,3) text
res5: scala.xml.Text = [1,2,3]

scala> List(1,2,3) show
res6: List[Char] = List([, 1, ,, 2, ,, 3, ])

scala> List(1,2,3) shows
res7: String = [1,2,3]

scala> List(1,2,3).show ≟ List(1,2,3).shows.toList
res10: Boolean = true</pre>
      </article>

      <article>
        <h1>Откуда?</h1>
        <img src="http://www.harrykey.com/blogs/wp-content/uploads/2010/10/Confused-Cat.gif" />
      </article>

      <article>
        <h5>Kinds</h5>
        <ul>
          <li><pre title="Identity.scala">A ~> Identity[A] // <a href="https://github.com/scalaz/scalaz/blob/master/core/src/main/scala/scalaz/Identity.scala">*</a></pre></li>
          <li><pre title="MA.scala">M[A] ~> MA[M, A] // <a href="https://github.com/scalaz/scalaz/blob/master/core/src/main/scala/scalaz/MA.scala">* → *</a></pre></li>
          <li><pre title="MAB.scala">M[A, B] ~> MAB[M, A, B] // <a href="https://github.com/scalaz/scalaz/blob/master/core/src/main/scala/scalaz/MAB.scala">* → * → *</a></pre></li>
        </ul>
        <a href="http://lambdy.ru/post/11576724386/type-kinds">Ссылка</a>
      </article>

      <article>
        <h1>Wrappers</h1>
        <pre>BooleanW, ListW, OptionW, Function[n]W, ...</pre>
        Тернарные операторы, условные конструкции, чейнинг, ...
      </article>

      <article class="smaller">
        <h5>Typeclasses (Полный список там → <a href="http://goo.gl/LcRWO">http://goo.gl/LcRWO</a>)</h5>
        <ul>
          <li>Semigroup</li>
          <li>Monoid extends Semigroup</li>
          <li>Group extends Monoid</li>
          <li>Equal</li>
          <li>Show</li>
          <li>Order extends Equal</li>
          <li>Functor</li>
          <li>Pointed extends Functor</li>
          <li>Apply extends Functor</li>
          <li>Applicative extends Apply with Pointed</li>
          <li>Bind extends Apply</li>
          <li>Monad extends Applicative with Bind</li>
          <li>ArrId</li>
          <li>Compose</li>
          <li>Category extends ArrId with Compose</li>
          <li>Arrow extends Category</li>        
      </article>

      <article>
        <h5>Типоклассопедия!</h5>
        <a href="http://www.haskell.org/haskellwiki/Typeclassopedia">http://www.haskell.org/haskellwiki/Typeclassopedia</a>
        <img src="http://byorgey.files.wordpress.com/2011/05/monad_tutorial.jpg" />
      </article>

      <article class="smaller">
        <h2>Структуры данных</h2>
        <img src="http://dl.dropbox.com/u/4274210/presentation/datastructures.png" />
      </article>

      <article>
        <h1>Моноид (S,⊗,1)</h1>
        <pre>
∀ a,b ∈ S:    a ⊗ b ∈ S
∀ a,b,c ∈ S: (a ⊗ b) ⊗ c = a ⊗ (b ⊗ c)
∀ a ∈ S:      1 ⊗ a = a ⊗ 1 = a
        </pre>
        <small><blockquote>Some people see a problem and think "I know, I'll use Haskell!" Now they have a monoid in the category of problems.</blockquote></small>
      </article>

      <article class="smaller">
        <h2>Моноиды (Semigroup + Zero)</h2>
        <div class="build">
          <pre>scala> 1 |+| 5
res64: Int = 6</pre>
          <pre>scala> (7 ∏) ⊹ (8 ∏)
res0: scalaz.IntMultiplication = 56</pre>
          <pre>scala> some(1) |+| some(5)
res65: Option[Int] = Some(6)

scala> (some(1) |+| ∅[Option[Int]]) === (some(1) |+| none)
res22: Boolean = true</pre>
          <pre>scala> some(some((1, "ok", 1 + (_:Int)))) |+| some(some((4, "ko", 2 * (_:Int))))
res67: Option[Option[(Int, java.lang.String, Int ⇒ Int)]] =
Some(Some((5,okko,&lt;function1&gt;)))          
</pre>
        </div>
      </article>

      <article class="smaller">
        <h5>Функторы → Монады</h5>
        <img src="http://dl.dropbox.com/u/4274210/lols/fmapfmapfmap.png" align="left"/>
        <div class="build">
             <pre>trait Functor[F[_]] {
  def fmap[A, B](f: A ⇒ B): F[A] ⇒ F[B]
}</pre>
             <pre>trait Pointed[P[_]] extends Functor[P] {
  def pure[A](a:A):P[A]
}</pre>
             <pre>trait Applicative[T[_]] extends Pointed[T]{
  def <*>[A,B](tf:T[A⇒B])(ta:T[A]):T[B]
}</pre>
             <pre>trait Monad[M[_]] extends Applicative[M]{
  def >>=[A,B](ma:M[A])(f:A⇒M[B]):M[B]
}</pre>
             <a href="http://typeclassopedia.bitbucket.org/">http://typeclassopedia.bitbucket.org/</a>
        </div>
      </article>

      <article>
        <h1>Валидаторы (demo)</h1>
        <p>Here be the demonstration with presenting how Validation is a functor (map), pointed (pure), applicative(|@|) and monad(sequence).</p>
      </article>

      <article>
        <h1>Functor</h1>
        <pre>scala> a map { _ + 5 }
res27: scalaz.Validation[Int,Int] = Success(6)</pre>
      </article>

      <article class="smaller">
        <h5>Applicative</h5>
        <pre>scala> :paste
// Entering paste mode (ctrl-D to finish)

val a: Validation[Int, Int] = 1.success
val b: Validation[Int, Int] = 2.success
val c: Validation[Int, Int] = 4.fail
val d: Validation[Int, Int] = 10.fail

val successSum = (a |@| b) { _ + _ } // (+) <$> a <*> b
// (+) <$> a <*> b <*> c <*> d
val allSum = (a |@| b |@| c |@| d) { _ + _ + _ + _ }
successSum === a <*> (b map { x ⇒ (y:Int) ⇒ x + y })

// Exiting paste mode, now interpreting.

a: scalaz.Validation[Int,Int] = Success(1)
b: scalaz.Validation[Int,Int] = Success(2)
c: scalaz.Validation[Int,Int] = Failure(4)
d: scalaz.Validation[Int,Int] = Failure(10)
successSum: scalaz.Validation[Int,Int] = Success(3)
allSum: scalaz.Validation[Int,Int] = Failure(4)
res17: Boolean = true</pre>
      </article>

      <article>
        <h5>Monad</h5>
        <pre>scala> List(a,b,c,d) map {_.liftFailNel}
<small>res39: List[scalaz.Validation[scalaz.NonEmptyList[Int],Int]] =
List(Success(1), Success(2), Failure(NonEmptyList(4)),
Failure(NonEmptyList(10)))</small>

scala> .sequence[({type λ[α] = ValidationNEL[Int, α]})#λ, Int]
<small>res40: scalaz.Validation[scalaz.NonEmptyList[Int],List[Int]] =
Failure(NonEmptyList(4, 10)</small></pre>
        <pre>scala> List(a,b) map {_.liftFailNel}
<small>res41: List[scalaz.Validation[scalaz.NonEmptyList[Int],Int]] =
List(Success(1), Success(2))</small>

scala> .sequence[({type λ[α] = ValidationNEL[Int, α]})#λ, Int]
<small>res42: scalaz.Validation[scalaz.NonEmptyList[Int],List[Int]] =
Success(List(1, 2))</small></pre>
      </article>

      <article class="smaller">
        <div class="build">
          <pre>sequence :: Monad m ⇒ [m a] → m [a]</pre>
          <pre>Either[A, B] // m a b</pre>
          <pre>trait Monad[M[_]] extends Applicative[M]</pre>
          <pre>instance Monad (Either e) -- haskell</pre>
          <pre>scala> class EitherMonad[A] extends Monad[Either[A]]
&lt;console>:8: error: wrong number of type arguments for Either, should be 2
       class EitherMonad[A] extends Monad[Either[A]]</pre>
          <p>Type lambdas to the resque!</p>
          <pre>({type λ[α] = Either[A, α]})#λ</pre>
          <pre>class EitherMonad[A] extends Monad[({type λ[α] = Either[A, α]})#λ]</pre>
        </div>
      </article>

      <article>
        <pre>(>>=) :: Monad m ⇒ m a → (a → m b) → m b // Строгий flatMap</pre>
        <pre>scala> val f = (x:Int) ⇒ (x > 3) ? x.success[Int] | x.fail[Int]
f: Int ⇒ scalaz.Validation[Int,Int] = <function1>

scala> 4.success[Int] >>= f
res5: scalaz.Validation[Int,Int] = Success(4)

scala> 4.fail[Int] >>= f
res6: scalaz.Validation[Int,Int] = Failure(4)

scala> 1.fail[Int] >>= f
res7: scalaz.Validation[Int,Int] = Failure(1)

scala> 1.success[Int] >>= f
res8: scalaz.Validation[Int,Int] = Failure(1)</pre>
      </article>

      <article>
        <pre>join :: Monad m ⇒ m (m a) → m a // Строгий flatten</pre>
        <pre>flatMap ≟ map . flatten</pre>
        <div class="build">
          <pre>scala> some(5).flatMap { x ⇒ some(x + 1) } ===
            some(5).map { x ⇒ some(x + 1) }.flatten
&lt;console>:14: error: polymorphic expression cannot be instantiated to
expected type;
 found   : [B]Iterable[B]
 required: Option[Int]
              some(5).flatMap { x ⇒ some(x + 1) } === some(5)
                     .map { x ⇒ some(x + 1) }.flatten
                                              ^</pre>
          <pre>scala> some(5).flatMap { x ⇒ some(x + 1) } ===
            some(5).map { x ⇒ some(x + 1) }.join
res2: Boolean = true</pre>
          </div>
      </article>

      <article>
        <h5>Прочее</h5>
        <ul>
          <li><a href="https://github.com/scalaz/scalaz/blob/master/core/src/main/scala/scalaz/Iteratee.scala">Iteratees</a>, идёт работа над <a href="https://github.com/arjanblokzijl/scala-conduits">Conduits</a></li>
          <li>Monad Transformers (OptionT, ListT, ReaderT, ...)</li>
          <li><a href="https://github.com/scalaz/scalaz/blob/master/core/src/main/scala/scalaz/Arrow.scala">Arrows</a></li>
          <li><a href="https://github.com/scalaz/scalaz/blob/master/core/src/main/scala/scalaz/effects/IO.scala">IO</a> с контролем эффектов</li>
          <li><a href="https://github.com/scalaz/scalaz/blob/master/core/src/main/scala/scalaz/Writer.scala">Writer</a>, Reader, <a href="https://github.com/scalaz/scalaz/blob/master/core/src/main/scala/scalaz/State.scala">State</a> monads</li>
          <li><a href="http://scalaz.github.com/scalaz/scalaz-2.9.0-1-6.0/doc.sxr/scalaz/Lens.scala.html">Lenses</a> (идёт работа над <a href="https://github.com/scalaz/scalaz/blob/partial-lens/core/src/main/scala/scalaz/PLens.scala">Partial Lenses</a>), <a href="http://scalaz.github.com/scalaz/scalaz-2.9.0-1-6.0/doc.sxr/scalaz/Zipper.scala.html">Zippers</a></li>
          <li>прочее</li>
        </ul>
      </article>

      <article>
        <img src="http://lolzombie.com/wp-content/uploads/2011/09/tumblr_lqk2n0MCXj1qh96peo1_500.jpeg" align="right" width="400"/>
        <h5><a href="http://code.google.com/p/scalaz/wiki/Scalaz7">scalaz7</a></h5>
        <ul>
          <li><a href="https://github.com/rwallace/scalaz/blob/scalaz7/core/src/main/scala/scalaz/ReaderWriterStateT.scala">RWS</a></li>
          <li><a href="https://github.com/rwallace/scalaz/blob/scalaz7/core/src/main/scala/scalaz/Kind.scala">Kinds</a></li>
          <li>Отделение сущностей вроде монад, функторов, етс от их синтаксиса и законов</li>
          <li>Куча прочего, до чего у меня руки ещё не дотянулись или не осилил</li>
        </ul>
      </article>

      <article>
        <h1>Как искать</h1>
        <ul>
          <li><a href="https://github.com/scalaz/scalaz/tree/scalaz-seven/example/src/main/scala/scalaz/example">package scalaz.example</a></li>
          <li><a href="https://github.com/scalaz/scalaz/tree/scalaz-seven/tests/src/test/scala/scalaz">scalaz tests</a></li>
          <li><a href="http://scalex.org/">scalex</a> (новая версия)</li>
        </ul>
      </article>

      <article>
        Ссылки:
        <ul>
          <li><a href="http://hacking-scala.posterous.com/scalaz-resources-for-beginners">http://hacking-scala.posterous.com/scalaz-resources-for-beginners</a></li>
          <li><a href="http://www.haskell.org/haskellwiki/Typeclassopedia">Типоклассопедия</a></li>
          <li><a href="http://www.infoq.com/presentations/Scalaz-Functional-Programming-in-Scala">Презентация одного из коммитеров scalaz (Rúnar Bjarnason) на конференции Strange loop.</a></li>
          <li><a href="http://spl.smugmug.com/gallery/13227630_j2MHcg/">Lambdacats</a></li>
        </ul>
      </article>

      <article>
        <h5>Как заинтродьюсить</h5>
        <img src="http://dl.dropbox.com/u/4274210/teach-kitten.jpg" height="200" />
        <ul>
          <li>Помогать решать ежедневные проблемы сотрудникам</li>
          <li>Объяснять то, что используете в своём коде</li>
          <li>Ввести практику небольших презентаций</li>
          <li>Код ревью — ваш друг</li>
          <li>Просто использовать, не задумываясь о внутренностях</li>
        </ul>
      </article>

      <article> 
        <h1>Спасибо!</h1>
        <p>Вопросы?</p>
        <img src="http://spl.smugmug.com/Humor/Lambdacats/escape/1246985268_LzMLb-O.png" height="130"/>
	<p>Эта презентация доступна по адресу: <a href="http://www.folone.info/docs/scalaz-presentation.html">http://www.folone.info/docs/scalaz-presentation.html</a></p>
      </article>

      <article>
        <h1><img src="https://twimg0-a.akamaihd.net/profile_images/402731175/remotion_twitter.gif" /> We are hiring!</h1>
        <img src="http://dl.dropbox.com/u/4274210/presentation/hiring.png" height="300"  />
        <p>(λx.folonexgmail.com)@&nbsp;<img src="http://dl.dropbox.com/u/4274210/presentation/nyancat.gif" align="center"/></p>
      </article>
 
    </section> 
 
  </body> 
</html>
