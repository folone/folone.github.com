<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <link rel="openid.server" href="http://www.myopenid.com/server" />
   <link rel="openid.delegate" href="http://folone.myopenid.com/" />
   <link rel="me" type="text/html" href="http://www.google.com/profiles/folone" />
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <meta http-equiv="Pragma" content="no-cache">
   <title>Небольшая заметка о комбинаторе неподвижной точки на Scala</title>
   <meta name="author" content="Georgii Leontiev" />
   <link href="http://feeds.feedburner.com/folone/site" rel="alternate" title="folone" type="application/atom+xml" />

   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />
   
    <style type="text/css">
        .site {
            width: 40em;
        }
    </style>
   

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />

   <!-- Typekit -->
   <script type="text/javascript" src="http://use.typekit.com/jpd0pfm.js"></script>
   <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

   <!-- GA -->
   <script type="text/javascript">
   var _gaq = _gaq || [];
   _gaq.push(['_setAccount', 'UA-2769351-2']);
   _gaq.push(['_trackPageview']);
   (function() {
     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
   })();
   </script>
</head>
<body>

<div class="site">
  <div class="title">
    <a href="/">Home</a>
    <a class="extra" href="https://github.com/folone/folone.github.com/tree/master/cv">Résumé</a>
  </div>
  
  <h1>Небольшая заметка о комбинаторе неподвижной точки на Scala</h1>
<div id="post">
<p>Недавно меня натолкнули на интересную тему <a href="http://comonad.com/reader/2009/recursion-schemes/">рекурсивных схем</a>. В процессе поглощения информации набросал yet another fixed point combinator на скале.</p>
<div class="highlight"><pre><code class="scala"><span class="c1">// По определению, в лоб:</span>
<span class="k">def</span> <span class="n">Y</span><span class="o">[</span><span class="kt">T</span><span class="o">](</span><span class="n">func</span><span class="k">:</span> <span class="o">(</span><span class="kt">T</span> <span class="o">=&gt;</span> <span class="kt">T</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="n">T</span> <span class="k">=&gt;</span> <span class="n">T</span><span class="o">))</span><span class="k">:</span> <span class="o">(</span><span class="kt">T</span> <span class="o">=&gt;</span> <span class="kt">T</span><span class="o">)</span> <span class="k">=</span> <span class="n">func</span><span class="o">(</span><span class="n">Y</span><span class="o">(</span><span class="n">func</span><span class="o">))(</span><span class="n">_:T</span><span class="o">)</span>
</code></pre>
</div>
<p>Ну и чтобы проверить, классический хелловорлд:</p>
<div class="highlight"><pre><code class="scala"><span class="k">def</span> <span class="n">fact</span> <span class="k">=</span> <span class="n">Y</span> <span class="o">{</span>
  <span class="n">f</span><span class="k">:</span> <span class="o">(</span><span class="kt">Int</span>  <span class="o">=&gt;</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span>
    <span class="n">n</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=&gt;</span>
      <span class="k">if</span><span class="o">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="o">)</span> <span class="mi">1</span>
      <span class="k">else</span> <span class="n">n</span> <span class="o">*</span> <span class="n">f</span><span class="o">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span>
<span class="o">}</span>
</code></pre>
</div>
<div class="highlight"><pre><code class="scala"><span class="n">scala</span><span class="o">&gt;</span> <span class="n">fact</span><span class="o">(</span><span class="mi">5</span><span class="o">)</span>
<span class="n">res0</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">120</span>
</code></pre>
</div>
<p>К сожалению, популярный</p>
<div class="highlight"><pre><code class="haskell"><span class="kt">Yk</span> <span class="ow">=</span> <span class="p">(</span><span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span> <span class="kt">L</span><span class="p">)</span>
<span class="kt">L</span> <span class="ow">=</span> <span class="err">λ</span><span class="n">abcdefghijklmnopqstuvwxyzr</span><span class="o">.</span> <span class="p">(</span><span class="n">r</span> <span class="p">(</span><span class="n">t</span> <span class="n">h</span> <span class="n">i</span> <span class="n">s</span> <span class="n">i</span> <span class="n">s</span> <span class="n">a</span> <span class="n">f</span> <span class="n">i</span> <span class="n">x</span> <span class="n">e</span> <span class="n">d</span> <span class="n">p</span> <span class="n">o</span> <span class="n">i</span> <span class="n">n</span> <span class="n">t</span> <span class="n">c</span> <span class="n">o</span> <span class="n">m</span> <span class="n">b</span> <span class="n">i</span> <span class="n">n</span> <span class="n">a</span> <span class="n">t</span> <span class="n">o</span> <span class="n">r</span><span class="p">))</span>
</code></pre>
</div>
<p>на скале описать не получится: максимальное количество параметров у функции &#8212; 22.</p>
<p><strong>Бонус</strong> &#8212; <a href="http://apocalisp.wordpress.com/2011/01/13/simple-ski-combinator-calculus-in-scalas-type-system/"><span class="caps">SKI</span>-calculus на скале</a></p>
<p><a href="http://spl.smugmug.com/Humor/Lambdacats/13227630_eKt46#960824968_hNkLy"><img src="http://spl.smugmug.com/Humor/Lambdacats/i-can-has-catamorfizm/960824968_hNkLy-O-1.jpg" alt="" /></a></p>
</div>
<hr />
<div style="float:right">
	<!-- Place this tag where you want the +1 button to render -->
	<g:plusone size="small"></g:plusone>

	<!-- Place this tag after the last plusone tag -->
	<script type="text/javascript">
	  (function() {
	    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
	    po.src = 'https://apis.google.com/js/plusone.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
	  })();
	</script>
</div>

<div id="related">
  <h2>Recent</h2>
  <ul class="posts">
    
      <li><span>09 Sep 2011</span> &raquo; <a href="/2011/09/09/RecursionSchemes">Recursion Schemes</a></li>
    
      <li><span>04 Aug 2011</span> &raquo; <a href="/2011/08/04/MathematicsDialog">Ещё одно решение задачки про математиков</a></li>
    
      <li><span>03 Aug 2011</span> &raquo; <a href="/2011/08/03/Emacs-setup-for-scala">Emacs setup for scala</a></li>
    
  </ul>
</div>


<div id="disqus_thread"></div>
<script
   type="text/javascript"
   src="http://disqus.com/forums/folone/embed.js">
</script>
<noscript>
  <a href="http://folone.disqus.com/?url=ref">View the discussion thread.</a>
</noscript>
<a href="http://disqus.com" class="dsq-brlink">
  blog comments powered by <span class="logo-disqus">Disqus</span>
</a>


  
  <div class="footer">
    <div class="contact">
      <p>
        George Leontiev<br />
        Scala developer at <a href="http://thenewmotion.com/">TheNewMotion</a><br />
        (λx.folonexgmail.com)@
      </p>
    </div>
    <div class="contact">
      <p>
        <a href="http://github.com/folone/">github.com/folone</a><br />
        <a href="http://twitter.com/folone/">twitter.com/folone</a><br />
        <a href="http://juick.com/folone/">juick.com/folone</a>
      </p>
    </div>
    <div class="rss">
      <a href="http://feeds.feedburner.com/folone/site">
        <img src="/images/rss.png" alt="Subscribe to RSS Feed" />
      </a>
    </div>
  </div>
<div id="cse" style="width: 100%;">Loading</div>
	<script src="http://www.google.com/jsapi" type="text/javascript"></script>
	<script type="text/javascript"> 
	  google.load('search', '1', {language : 'ru'});
	  google.setOnLoadCallback(function() {
	    var customSearchControl = new google.search.CustomSearchControl('010935229799049702273:zzobyr0tp6u');
	    customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
	    customSearchControl.draw('cse');
	  }, true);
	</script>
	<link rel="stylesheet" href="http://www.google.com/cse/style/look/default.css" type="text/css" />
</div>

<a href="http://github.com/folone"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://a248.e.akamai.net/assets.github.com/img/abad93f42020b733148435e2cd92ce15c542d320/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub"></a>

</body>
</html>
